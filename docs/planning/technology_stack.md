# AstroTracker - Proposed Technology Stack

This document details the recommended technology stack for the AstroTracker project, designed to meet the requirements for a visually rich, dynamic, performant, and secure astrology web application with Google OAuth integration, drawing inspiration from the provided reference screenshots.

## Core Principles

*   **Performance:** Prioritize fast load times and smooth interactions, especially for complex chart rendering and data updates, using modern web technologies (static-first architecture, efficient component rendering, optimized backend).
*   **Interactivity & Visuals:** Employ powerful libraries for rendering complex, interactive charts (wheels, timelines, grids) and UI elements (maps, tables, toggles) matching the density and style of reference designs.
*   **Scalability:** Choose technologies that can scale to accommodate user growth and feature expansion.
*   **Maintainability:** Utilize well-established frameworks and libraries with strong community support.
*   **Security:** Implement security best practices throughout the stack, especially for authentication and user data handling.

## Proposed Stack

| Layer                     | Technology Choice         | Version (Recommendation) | Key Dependencies/Modules                            | Rationale                                                                                                                                                                                                                                                                                                                         |
| :------------------------ | :------------------------ | :----------------------- | :-------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Frontend Framework**    | Astro                     | Latest Stable            | `@astrojs/react`, `@astrojs/tailwind`               | Excellent performance (MPA/SPA flexibility), great DX. Allows using React for complex interactive UI islands (charts, forms, data tables) as seen in screenshots, keeping static parts fast.                                                                                                                             |
| **UI Components**         | React                     | Latest Stable            | `react`, `react-dom`                                | Mature library for building the highly interactive and stateful components needed for dynamic charts, input forms (birth data), configuration panels, and data displays within Astro islands.                                                                                                                            |
| **Component Library (Optional)** | Shadcn/UI / Mantine   | Latest Stable            | `tailwindcss`, `radix-ui` (for Shadcn) or `@mantine/*` | (Optional but Recommended) To accelerate development of standard UI elements (buttons, modals, date pickers, toggles, tooltips) seen in screenshots, built on top of Tailwind/headless components. Ensures consistency and accessibility while allowing customization. |
| **Styling**               | Tailwind CSS              | Latest Stable            | `tailwindcss`, `autoprefixer`, `postcss`            | Utility-first CSS framework for rapid, custom UI development. Essential for achieving the specific dark-themed, data-dense visual aesthetic shown in the screenshots.                                                                                                                                           |
| **State Management**      | Zustand                   | Latest Stable            | `zustand`                                           | Simple, lightweight state management for React components. Crucial for managing complex UI state (chart configurations, selected dates, user inputs) across different interactive islands without prop drilling.                                                                                                  |
| **Charting/Vis (Wheel)**  | SVG / Canvas (via React)  | N/A                      | `react`                                             | Direct rendering needed for maximum control over the custom, multi-layered astrological chart wheels (natal, synastry). Allows precise placement of planets, houses, aspects, and glyphs as shown.                                                                                                            |
| **Charting/Vis (Support)**| D3.js                     | Latest Stable            | `d3`                                                | Powerful library primarily for complex calculations (e.g., aspect line geometry, house divisions), geometric transformations, and potentially assisting SVG/Canvas generation for the unique chart wheels and non-standard visualizations. May not be needed for direct rendering if logic is handled elsewhere. |
| **Charting/Vis (Graphs)** | Recharts / Nivo           | Latest Stable            | `recharts` or `@nivo/*`                             | Declarative React charting libraries suitable for more standard graphs like the transit timelines (Gantt-like) and ephemeris line graphs shown. Evaluate Nivo as an alternative if Recharts lacks specific features needed.                                                                                             |
| **Mapping**               | Leaflet (with React wrapper)| Latest Stable            | `leaflet`, `react-leaflet`                          | For the interactive world map needed for birth location input, as seen in one screenshot. Lightweight and feature-rich.                                                                                                                                                                 |
| **Data Grids/Tables**     | React Table / AG Grid     | Latest Stable            | `react-table` or `ag-grid-react`                      | For displaying dense tabular data like the aspect grid shown. Need features like sorting, potentially filtering. Evaluate based on complexity and performance needs.                                                                                                                               |
| **Backend Framework**     | Python / FastAPI          | Python 3.10+, FastAPI Latest | `fastapi`, `uvicorn`, `pydantic`                    | High-performance Python framework. Great for building the API endpoints needed to feed data to the complex frontend visualizations and handle calculations efficiently.                                                                                                                                      |
| **Astrology Engine**      | Kerykeion / PyEphem       | Latest Stable            | `kerykeion` or `ephem`                                | Python libraries for accurate astrological calculations (planetary positions, houses, aspects). Must be performant enough to support dynamic chart updates based on user input (e.g., changing dates).                                                                                                          |
| **Database**              | PostgreSQL                | Latest Stable (e.g., 15+) | `psycopg2-binary` or `asyncpg` (for FastAPI)      | Robust, feature-rich relational database. Handles user data, saved charts, potentially user preferences for UI/chart settings.                                                                                                                                                                        |
| **ORM/DB Client**         | SQLModel / SQLAlchemy Core| Latest Stable            | `sqlmodel` (builds on Pydantic & SQLAlchemy)        | Provides Pythonic interface to the database, integrating well with FastAPI and Pydantic data validation.                                                                                                                                                                            |
| **Authentication**        | FastAPI Users             | Latest Stable            | `fastapi-users[oauth]`                              | Handles user registration, login, password recovery, and importantly, OAuth integration (including Google). Secure defaults necessary for handling personal user data.                                                                                                                                 |
| **API Schema**            | OpenAPI (via FastAPI)     | N/A                      | `fastapi`                                           | FastAPI automatically generates OpenAPI (Swagger/ReDoc) documentation, ensuring a clear API contract between frontend and backend. Crucial for complex applications.                                                                                                                             |
| **Deployment (Frontend)** | Vercel                    | N/A                      | -                                                   | Optimized hosting for Astro/React projects. Provides CI/CD, CDN, serverless functions (optional). Handles frontend build complexities.                                                                                                                                                             |
| **Deployment (Backend)**  | Render / Fly.io           | N/A                      | Docker                                              | Platform-as-a-Service providers offering easy deployment for containerized FastAPI applications and managed PostgreSQL databases. Simplifies infrastructure management.                                                                                                                            |
| **Containerization**      | Docker                    | Latest Stable            | `Dockerfile`                                        | Standard for packaging the backend application and its dependencies for consistent deployment across environments. Ensures astrology engine dependencies are correctly managed.                                                                                                                            |
| **Package Management**    | PNPM (Frontend)           | Latest Stable            | `package.json`, `pnpm-lock.yaml`                    | Fast and efficient JavaScript package manager.                                                                                                                                                                                                                                    |
| **Package Management**    | Poetry (Backend)          | Latest Stable            | `pyproject.toml`, `poetry.lock`                     | Modern Python dependency management and packaging tool. Ensures reproducible builds, crucial for complex backend dependencies like the astrology engine.                                                                                                                                         |

## Dependencies & Versions

*   **General Rule:** Use the latest stable versions of all libraries and frameworks unless a specific version is required for compatibility or specific features. Pin major versions.
*   **Frontend:** Manage dependencies via `pnpm` and `package.json`.
*   **Backend:** Manage dependencies via `poetry` and `pyproject.toml`.
*   **Environment Variables:** Use environment variables (`.env` file locally, managed secrets in deployment) for configuration (API keys, database URLs, secret keys, OAuth credentials).

## Additional Considerations from Screenshots

*   **UI Density:** The chosen UI component approach (React + Tailwind +/- Component Library) must efficiently handle the high density of controls and information displayed without performance degradation.
*   **Chart Performance:** Complex SVG/Canvas charts can be resource-intensive. Optimize rendering, consider debouncing/throttling updates during interactions (like dragging a date slider), and potentially use web workers for heavy client-side calculations if needed.
*   **Data Fetching:** Efficient data fetching patterns between the React components (running in Astro islands) and the FastAPI backend are essential for responsiveness. Consider libraries like `react-query` or `swr` within the React components.

---
*This stack provides a robust foundation tailored to the visual and functional complexity observed. Specific library choices (e.g., Charting, Astrology Engine, Data Grids) may require further evaluation and benchmarking during development.* 